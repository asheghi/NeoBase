import{_ as y,u as M,a as s,b as i,g as v,t as p,h as a,w as h,k as c,d,o as n,e as f}from"./index.af53e14a.js";import{A as E}from"./api.6f9d2f33.js";import{D as w}from"./trash.6ae5f1e4.js";import{C}from"./NewDocument.af3208cf.js";import{N as V}from"./N-Button.df8eb929.js";/* empty css                                                   */import"./JsonInput.625ef831.js";var I="/assets/pen.fcb37604.svg";const u="mode-view",l="mode-edit",N={name:"ViewEditDocument",components:{NButton:V,CreateDocument:C,DeleteIcon:w,IconEdit:I},beforeRouteUpdate(){this.doc=null,this.fetchDocument()},setup(){const{collection:e,_id:o}=M().params,m=E.Documents(e);return{collection:e,id:o,api:m}},data(){return{doc:null,currentMode:u,ModeEdit:l,ModeView:u,fetching:!1}},computed:{alternateMode(){return this.currentMode===l?u:l},docId(){var e,o;return(o=(e=this.$route)==null?void 0:e.params)==null?void 0:o._id}},mounted(){this.fetchDocument()},methods:{async fetchDocument(){try{this.fetching=!0;const{data:e}=await this.api.findOne({_id:this.docId});this.doc=e}catch(e){console.error(e)}finally{}},toggleEditMode(){this.currentMode=this.alternateMode},onUpdate(){this.fetchDocument(),this.toggleEditMode()}}},B={class:"ViewEditDocument card"},x={class:"header flex gap-4"},U={class:"opacity-50 -ml-2"},b=i("span",{class:"ml-auto"},null,-1),A={key:0},O={key:0,class:"p-4"},R={key:1,class:"skeloading"};function S(e,o,m,J,t,r){const D=d("IconEdit"),_=d("NButton"),g=d("DeleteIcon"),k=d("CreateDocument");return n(),s("div",B,[i("div",x,[v(" Document "),i("span",U," ("+p(r.docId)+") ",1),b,t.doc?(n(),a(_,{key:0,class:"",onClick:r.toggleEditMode},{default:h(()=>[f(D)]),_:1},8,["onClick"])):c("",!0),t.doc?(n(),a(_,{key:1,class:"",onClick:o[0]||(o[0]=T=>e.$emit("deleteDocument",t.doc))},{default:h(()=>[f(g)]),_:1})):c("",!0)]),t.currentMode===t.ModeView?(n(),s("div",A,[t.doc?(n(),s("pre",O,[i("code",null,p(JSON.stringify(t.doc,null,"	")),1)])):c("",!0),t.doc?c("",!0):(n(),s("div",R))])):c("",!0),t.currentMode===t.ModeEdit?(n(),a(k,{key:1,"hide-id":"",doc:t.doc,onUpdated:r.onUpdate},null,8,["doc","onUpdated"])):c("",!0)])}var L=y(N,[["render",S]]);export{L as default};
