import{A as Q,b as W,a as X,p as Y}from"./api.9cb1a443.js";import{o as s,c as o,a as t,_ as P,b as U,z as T,t as l,h as $,k as y,w as K,v as ee,F as j,n as I,D as H,r as R,m as te,p as C,q as se,u as r,d as S,i as oe,g as Z}from"./index.7b1a8b90.js";import{d as q}from"./actions.f0846f90.js";import{J as ne}from"./JsonInput.5e283cb4.js";const A={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},ae=t("path",{d:"M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"},null,-1),ce=[ae];function ie(_,a){return s(),o("svg",A,ce)}A.width="24";A.height="24";A.viewBox="0 0 24 24";var re={render:ie};const E={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},le=t("path",{d:"M11.83 9 15 12.16V12a3 3 0 0 0-3-3h-.17m-4.3.8 1.55 1.55c-.05.21-.08.42-.08.65a3 3 0 0 0 3 3c.22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53a5 5 0 0 1-5-5c0-.79.2-1.53.53-2.2M2 4.27l2.28 2.28.45.45C3.08 8.3 1.78 10 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.43.42L19.73 22 21 20.73 3.27 3M12 7a5 5 0 0 1 5 5c0 .64-.13 1.26-.36 1.82l2.93 2.93c1.5-1.25 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-4 .7l2.17 2.15C10.74 7.13 11.35 7 12 7Z"},null,-1),ue=[le];function de(_,a){return s(),o("svg",E,ue)}E.width="24";E.height="24";E.viewBox="0 0 24 24";var _e={render:de};const pe={name:"ActionOptions",components:{JsonInput:ne},props:{options:{type:Object,required:!0},showOptionals:{type:Boolean,default:!1}},emits:["@update:form"],data(){return{t_form:this.form}},methods:{onUpdate(_,a){console.log("updated",_,a)},checkOptional(_){return this.showOptionals?!0:!_.optional}}},he={key:0,class:"row"},ve={class:"label flex gap-1 whitespace-nowrap"},me=["textContent"],fe=["textContent"],xe=["onUpdate:modelValue"];function ye(_,a,i,k,u,b){const c=U("JsonInput"),f=U("ActionOptions",!0);return s(!0),o(j,null,T(i.options,(n,w)=>(s(),o("div",{key:w,class:"option"},[!n.fields&&b.checkOptional(n)?(s(),o("div",he,[t("div",ve,[t("div",{class:"text",textContent:l(w)},null,8,me),t("div",{class:"type opacity-50",textContent:l("("+n.type+")")},null,8,fe)]),n.type==="json"?(s(),$(c,{key:0,class:"input","model-value":n.value,onChange:p=>n.value=p},null,8,["model-value","onChange"])):y("",!0),n.type!=="json"?K((s(),o("input",{key:1,"onUpdate:modelValue":p=>n.value=p,class:"input",type:"text"},null,8,xe)),[[ee,n.value]]):y("",!0)])):y("",!0),n.fields&&b.checkOptional(n)?(s(),$(f,{key:1,options:n.fields,"show-optionals":i.showOptionals},null,8,["options","show-optionals"])):y("",!0)]))),128)}var ge=P(pe,[["render",ye]]);const L={response_body:"Response",headers:"Headers"},be={name:"ExecutionResult",props:{execution:{type:Object,default:()=>({})}},data(){return{tabs:L,currentTab:Object.values(L)[0]}}},we={class:"ExecutionResult"},ke={key:0,class:"loading"},Oe={class:"row"},Ce={class:"tabs"},je=["onClick","textContent"],Te={class:"ml-auto"},$e=t("div",{class:""},"status:",-1),Ae={class:""},Ee=t("div",null,"time:",-1),Be={key:0,class:"body"},De={key:1,class:"headers border border-gray-100 p-2"},Ve={class:"header-name opacity-50 font-bold"},Ne={class:"header-value"};function Re(_,a,i,k,u,b){return s(),o("div",we,[i.execution.loading?(s(),o("div",ke,"Loading ...")):y("",!0),!i.execution.loading&&Object.keys(i.execution).length?(s(),o(j,{key:1},[t("div",Oe,[t("div",Ce,[(s(!0),o(j,null,T(u.tabs,(c,f)=>(s(),o("button",{key:f,class:I(["tab",{active:c===u.currentTab}]),onClick:n=>u.currentTab=c,textContent:l(c)},null,10,je))),128))]),t("div",Te,[$e,t("div",{class:I(["res-code",{"text-red-500":i.execution.status&&i.execution.status>=400}])},l(i.execution.status),3)]),t("div",Ae,[Ee,t("div",null,l(i.execution.responseTime)+"ms",1)])]),u.currentTab===u.tabs.response_body?(s(),o("div",Be,[t("pre",null,[t("code",null,l(JSON.stringify(i.execution.data,null,"	")),1)])])):y("",!0),u.currentTab===u.tabs.headers?(s(),o("div",De,[(s(!0),o(j,null,T(i.execution.res_headers,(c,f)=>(s(),o("div",{key:f,class:"header flex gap-2 py-2"},[t("div",Ve,l(f)+":",1),t("div",Ne,l(c),1)]))),128))])):y("",!0)],64)):y("",!0)])}var qe=P(be,[["render",Re]]);const B={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},Ie=t("path",{d:"M8 5.14v14l11-7-11-7Z"},null,-1),Je=[Ie];function Me(_,a){return s(),o("svg",B,Je)}B.width="24";B.height="24";B.viewBox="0 0 24 24";var Ue={render:Me};const He={class:"ActionPlayground"},Se={class:"api"},Le={class:"url flex gap-2 px-2 items-center"},Pe={class:"value"},Ze={class:"opacity-75 p-1"},ze={class:"p-1 bg-gray-200"},Fe=Z(" Execute "),Ge=t("div",{class:"font-bold mb-2"},"options",-1),Qe=t("div",{class:"row flex items-center justify-between py-4"},null,-1),We={name:"ActionPlayground"},tt=Object.assign(We,{setup(_){const a=H(q),i=R("");Object.keys(q).forEach(e=>{a[e].hideAuthToken||(a[e].options||(a[e].options={}),a[e].options.headers={type:"json",fields:{"x-auth-token":{optional:!0,type:"string",value:i}}})});const k=te(),u=C(()=>k.params.project),b=C(()=>k.params.collection),c=C(()=>k.params.action),f=C(()=>q[c.value]);C(()=>Q.Documents(u,b));const n=R(0);function w(e){if(!e)return{};let x={};return typeof e=="object"&&e&&Object.keys(e).forEach(h=>{if(!e[h])return;let v=e[h].fields;v?Object.keys(v).forEach(m=>{if(v[m].fields)x[m]=w({[m]:v[m]});else{let d=v[m].value;d.__v_isRef?x[m]=d.value:x[m]=d}}):x=e[h].value}),x}const p=H([]),z=async()=>{const e={action:c.value};p.splice(0,0,e);const{url:x,options:h,method:v}=f.value,m=x.replace(":project",u.value).replace(":collection",b.value);let d=w({body:h.body});const D=w({headers:h.headers});if(typeof d=="string"&&h.body.type==="json")try{d=JSON.parse(d)}catch(g){console.error(g)}e.loading=!0;const J=new Date().getTime();try{const{data:g,status:V,headers:N,request:M}=await X({url:m,data:d,method:v,params:{},headers:D,skipAccountToken:!0});e.responseTime=new Date().getTime()-J,e.data=g,e.status=V,e.body=d,e.res_headers=N,e.req_headers=D}catch(g){const{status:V,data:N,msg:M,headers:G}=Y(g);e.error=g.message,e.responseTime=new Date().getTime()-J,e.data=N,e.status=V,e.body=d,e.res_headers=G,e.req_headers=D,e.error_msg=M,console.error(g)}finally{e.loading=!1,p.length>3&&p.splice(2,p.length-3),n.value++}},O=R(!1),F=()=>{O.value=!O.value};return se(()=>a,()=>{n.value=n.value+1},{deep:!0,immediate:!0}),(e,x)=>(s(),o("div",He,[t("div",Se,[t("div",Le,[t("div",{class:I(["method text-lg font-bold uppercase",r(a)[r(c)].method])},l(r(a)[r(c)].method),3),t("div",Pe,[t("span",Ze,l(r(W)),1),t("span",ze,l(r(a)[r(c)].url),1)]),t("button",{class:"ml-auto flex gap-2 px-4 font-bold items-center py-2 bg-primary text-white",onClick:z},[Fe,S(r(Ue),{class:"fill-white"})])])]),(s(),o("div",{key:r(c),class:"options pt-4 relative p-2 border border-gray-200"},[Ge,S(ge,{"show-optionals":O.value,options:r(a)[r(c)].options},null,8,["show-optionals","options"]),t("button",{class:"toggle-options-btn",onClick:F},[(s(),$(oe(O.value?r(_e):r(re)),{class:"fill-primary"})),Z(" "+l(O.value?"less":"more")+" options ",1)])])),Qe,(s(!0),o(j,null,T(r(p),(h,v)=>(s(),$(qe,{key:v+n.value,execution:h},null,8,["execution"]))),128))]))}});export{tt as default};
