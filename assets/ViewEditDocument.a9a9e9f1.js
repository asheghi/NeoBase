import{o as c,c as s,a as d,_ as k,m as y,b as i,t as f,h as l,e as g,k as n,g as E,d as D}from"./index.cdcacdc3.js";import{A as C}from"./api.9e09c6a2.js";import{D as V}from"./trash.d071f0d1.js";import{C as x}from"./NewDocument.126dbef4.js";import{N as I}from"./N-Button.ff915318.js";import"./JsonEditor.7fd89b09.js";import"./JsonInput.8fc06401.js";const r={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},N=d("path",{d:"M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44-.02.49-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3v-3.75Z"},null,-1),B=[N];function U(e,o){return c(),s("svg",r,B)}r.width="24";r.height="24";r.viewBox="0 0 24 24";var b={render:U};const u="mode-view",_="mode-edit",A={name:"ViewEditDocument",components:{NButton:I,CreateDocument:x,DeleteIcon:V,IconEdit:b},beforeRouteUpdate(){this.doc=null,this.fetchDocument()},setup(){const{project:e,collection:o,_id:m}=y().params,h=C.Documents(e,o);return{project:e,collection:o,id:m,api:h}},data(){return{doc:null,currentMode:u,ModeEdit:_,ModeView:u,fetching:!1}},computed:{alternateMode(){return this.currentMode===_?u:_},docId(){var e,o;return(o=(e=this.$route)==null?void 0:e.params)==null?void 0:o._id}},mounted(){this.fetchDocument()},methods:{async fetchDocument(){try{this.fetching=!0;const{data:e}=await this.api.findOne({_id:this.docId});this.doc=e}catch(e){console.error(e)}finally{}},toggleEditMode(){this.currentMode=this.alternateMode},onUpdate(){this.fetchDocument(),this.toggleEditMode()}}},L={class:"ViewEditDocument card"},O={class:"header flex gap-4"},R=E(" Document "),S={class:"opacity-50 -ml-2"},j=d("span",{class:"ml-auto"},null,-1),H={key:0},J={key:0,class:"p-4"},T={key:1,class:"skeloading"};function Z(e,o,m,h,t,a){const v=i("IconEdit"),p=i("NButton"),w=i("DeleteIcon"),M=i("CreateDocument");return c(),s("div",L,[d("div",O,[R,d("span",S," ("+f(a.docId)+") ",1),j,t.doc?(c(),l(p,{key:0,class:"",onClick:a.toggleEditMode},{default:g(()=>[D(v)]),_:1},8,["onClick"])):n("",!0),t.doc?(c(),l(p,{key:1,class:"",onClick:o[0]||(o[0]=q=>e.$emit("deleteDocument",t.doc))},{default:g(()=>[D(w)]),_:1})):n("",!0)]),t.currentMode===t.ModeView?(c(),s("div",H,[t.doc?(c(),s("pre",J,[d("code",null,f(JSON.stringify(t.doc,null,"	")),1)])):n("",!0),t.doc?n("",!0):(c(),s("div",T))])):n("",!0),t.currentMode===t.ModeEdit?(c(),l(M,{key:1,"hide-id":"",doc:t.doc,onUpdated:a.onUpdate},null,8,["doc","onUpdated"])):n("",!0)])}var X=k(A,[["render",Z]]);export{X as default};
