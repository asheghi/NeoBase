import{_ as M,k as g,a as p,o as c,c as s,d as n,y as _,h,x as i}from"./index.004dc69e.js";import{A as y}from"./api.12c2b3cd.js";import{D as v}from"./trash.1f81c317.js";import{C as E}from"./NewDocument.e229370d.js";import"./JsonEditor.fda14315.js";const r="mode-view",u="mode-edit",k={name:"ViewEditDocument",components:{CreateDocument:E,DeleteIcon:v},beforeRouteUpdate(){this.doc=null,this.fetchDocument()},setup(){const{project:o,collection:t,_id:l}=g().params,m=y.Documents(o,t);return{project:o,collection:t,id:l,api:m}},data(){return{doc:null,currentMode:r,ModeEdit:u,ModeView:r}},computed:{alternateMode(){return this.currentMode===u?r:u}},mounted(){this.fetchDocument()},methods:{async fetchDocument(){const{data:o}=await this.api.findOne({_id:this.$route.params._id});this.doc=o},toggleEditMode(){this.currentMode=this.alternateMode},onUpdate(){this.fetchDocument(),this.toggleEditMode()}}},w={class:"ViewEditDocument"},x={class:"flex items-center justify-between"},C=["textContent"],V={class:"icons flex items-center gap-2"},b={key:0},U={key:0};function B(o,t,l,m,e,d){const f=p("DeleteIcon"),D=p("CreateDocument");return c(),s("div",w,[n("div",x,[n("div",{class:"head opacity-50 px-4 -mx-4 mb-4",textContent:_(e.doc?e.doc._id:"Document")},null,8,C),n("div",V,[n("button",{onClick:t[0]||(t[0]=(...a)=>d.toggleEditMode&&d.toggleEditMode(...a))},"Edit"),n("button",{onClick:t[1]||(t[1]=a=>o.$emit("deleteDocument",e.doc))},[e.doc?(c(),h(f,{key:0,class:"fill-red-500 opacity-75",width:"24",height:"24"})):i("",!0)])])]),e.currentMode===e.ModeView?(c(),s("div",b,[e.doc?(c(),s("pre",U,[n("code",null,_(JSON.stringify(e.doc,null,"	")),1)])):i("",!0)])):i("",!0),e.currentMode===e.ModeEdit?(c(),h(D,{key:1,"hide-id":"",doc:e.doc,onUpdated:d.onUpdate},null,8,["doc","onUpdated"])):i("",!0)])}var R=M(k,[["render",B]]);export{R as default};
