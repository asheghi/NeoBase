import{A as j,t as g}from"./api.d99f241a.js";import{o as n,c as a,a as s,_ as P,b as l,h as y,e as w,B as C,w as $,v as b,d,g as N,t as k,F as f,z as v,k as p}from"./index.81fc11e4.js";import{M as V}from"./Modal.11011273.js";import{N as F}from"./N-Button.ab045c10.js";const h={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},I=s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"},null,-1),D=[I];function A(o,e){return n(),a("svg",h,D)}h.width="24";h.height="24";h.viewBox="0 0 24 24";var H={render:A};const m={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},K=s("path",{d:"M10 4H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-8l-2-2Z"},null,-1),T=[K];function Z(o,e){return n(),a("svg",m,T)}m.width="24";m.height="24";m.viewBox="0 0 24 24";var z={render:Z};const E={name:"NewProjectModal",components:{Modal:V,NButton:F},data(){return{form:{name:""},loading:!1}},methods:{show(){this.$refs.modal.show()},async submit(){if(!this.loading){this.loading=!0;try{const{data:o,status:e}=await j.Projects.create({name:this.form.name});this.$refs.modal.hide(),this.form.name="",await this.fetchData(),g("New project created")}catch(o){console.error(o),g("Failed to create project",{text:o.response.data.msg,icon:"error"})}finally{this.loading=!1}}}}},L={class:"new-project"},S={class:"form-group"},U=s("label",{for:"email"},"Project Name",-1);function q(o,e,x,M,t,c){const _=l("NButton"),u=l("Modal");return n(),y(u,{ref:"modal","close-on-click-outside":!t.loading,onClosed:e[2]||(e[2]=i=>t.form.name="")},{default:w(()=>[s("div",L,[s("div",{class:"form",onKeydown:e[1]||(e[1]=C((...i)=>c.submit&&c.submit(...i),["enter"]))},[s("div",S,[U,$(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=i=>t.form.name=i),name:"email",placeholder:"what's the name of your app?"},null,512),[[b,t.form.name]])]),d(_,{loading:t.loading,class:"primary w-full",onClick:c.submit},{default:w(()=>[N(k(t.loading?"Creating new":"Create")+" project ",1)]),_:1},8,["loading","onClick"])],32)])]),_:1},8,["close-on-click-outside"])}var G=P(E,[["render",q]]);const J={name:"ManageProjects",components:{NewProjectModal:G,IconPlus:H,IconFolder:z},data(){return{projects:[],fetching:null}},mounted(){this.fetchData()},methods:{onNewProject(){this.$refs.newProjectModal.show()},async fetchData(){this.fetching=!0;try{const{data:o}=await j.Projects.list();this.projects=o}catch(o){console.error(o)}finally{this.fetching=!1}}}},O={class:"ManageProjects"},Q={class:"list"},R=s("span",null,"New Project",-1),W={key:0,class:"no-data"};function X(o,e,x,M,t,c){const _=l("IconPlus"),u=l("IconFolder"),i=l("router-link"),B=l("NewProjectModal");return n(),a("div",O,[s("div",Q,[s("button",{class:"card",onClick:e[0]||(e[0]=(...r)=>c.onNewProject&&c.onNewProject(...r))},[d(_,{viewBox:"0 0 20 20",class:"icon"}),R]),t.fetching?(n(),a(f,{key:0},v(3,r=>s("div",{key:r,class:"card skeloading"})),64)):p("",!0),t.fetching?p("",!0):(n(),a(f,{key:1},[(n(!0),a(f,null,v(t.projects,r=>(n(),y(i,{key:r._id,to:{name:"collections",params:{project:r.name}},class:"card"},{default:w(()=>[d(u,{class:"icon",viewBox:"0 0 24 24"}),N(" "+k(r.name),1)]),_:2},1032,["to"]))),128)),!t.projects||!t.projects.length?(n(),a("div",W," you have no projects. ")):p("",!0)],64))]),d(B,{ref:"newProjectModal"},null,512)])}var se=P(J,[["render",X]]);export{se as default};
