import{_ as M,q as g,f as p,o as c,c as d,b as n,t as _,g as h,j as i}from"./index.46219c50.js";import{A as v}from"./api.93f647bf.js";import{D as y}from"./trash.472b32d1.js";import{C as E}from"./NewDocument.8cf2071a.js";import"./JsonEditor.1e42b785.js";const r="mode-view",u="mode-edit",w={name:"ViewEditDocument",components:{CreateDocument:E,DeleteIcon:y},beforeRouteUpdate(){this.doc=null,this.fetchDocument()},setup(){const{project:o,collection:t,_id:l}=g().params,m=v.Documents(o,t);return{project:o,collection:t,id:l,api:m}},data(){return{doc:null,currentMode:r,ModeEdit:u,ModeView:r}},computed:{alternateMode(){return this.currentMode===u?r:u}},mounted(){this.fetchDocument()},methods:{async fetchDocument(){const{data:o}=await this.api.findOne({_id:this.$route.params._id});this.doc=o},toggleEditMode(){this.currentMode=this.alternateMode},onUpdate(){this.fetchDocument(),this.toggleEditMode()}}},C={class:"ViewEditDocument"},k={class:"flex items-center justify-between"},x=["textContent"],V={class:"icons flex items-center gap-2"},b={key:0},U={key:0};function B(o,t,l,m,e,s){const f=p("DeleteIcon"),D=p("CreateDocument");return c(),d("div",C,[n("div",k,[n("div",{class:"head opacity-50 px-4 -mx-4 mb-4",textContent:_(e.doc?e.doc._id:"Document")},null,8,x),n("div",V,[n("button",{onClick:t[0]||(t[0]=(...a)=>s.toggleEditMode&&s.toggleEditMode(...a))},"Edit"),n("button",{onClick:t[1]||(t[1]=a=>o.$emit("deleteDocument",e.doc))},[e.doc?(c(),h(f,{key:0,class:"fill-red-500 opacity-75",width:"24",height:"24"})):i("",!0)])])]),e.currentMode===e.ModeView?(c(),d("div",b,[e.doc?(c(),d("pre",U,[n("code",null,_(JSON.stringify(e.doc,null,"	")),1)])):i("",!0)])):i("",!0),e.currentMode===e.ModeEdit?(c(),h(D,{key:1,"hide-id":"",doc:e.doc,onUpdated:s.onUpdate},null,8,["doc","onUpdated"])):i("",!0)])}var R=M(w,[["render",B]]);export{R as default};
