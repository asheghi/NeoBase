import{a as ee,p as te,A as G,b as oe}from"./api.6f9d2f33.js";import{_ as H,o,a as s,j as A,b as t,t as p,h as E,k as b,p as se,v as ne,F as O,d as R,w as D,g as U,n as V,s as Q,r as q,c as M,z as ae,x as le,e as S,f as d,i as ce,u as ie,A as re}from"./index.af53e14a.js";import{J as ue}from"./JsonInput.625ef831.js";import{N as J}from"./N-Button.df8eb929.js";const N={find:{name:"find",url:"documents/:collection/find",method:"post",options:{body:{type:"json",fields:{filter:{type:"json",value:""},projection:{type:"json",optional:!0,value:""},options:{type:"json",optional:!0,fields:{sort:{type:"json",value:""},skip:{type:"integer",value:""},limit:{type:"integer",value:""}}}}}}},findOne:{name:"findOne",url:"documents/:collection/findOne",method:"post",options:{body:{type:"json",fields:{filter:{type:"json",value:""},projection:{type:"json",optional:!0,value:""}}}}},count:{name:"count",url:"documents/:collection/count",method:"post",options:{body:{type:"json",fields:{filter:{type:"json",value:""}}}}},create:{name:"create",url:"documents/:collection/create",method:"post",options:{body:{type:"json",value:""}}},updateOne:{name:"updateOne",url:"documents/:collection/updateOne",method:"post",options:{body:{type:"json",fields:{filter:{type:"json",value:""},update:{type:"json",value:""}}}}},deleteOne:{name:"deleteOne",url:"documents/:collection/deleteOne",method:"post",options:{body:{type:"json"}}},deleteMany:{name:"deleteMany",url:"documents/:collection/deleteMany",method:"post",options:{body:{type:"json"}}},register:{name:"register",url:"auth/register",method:"post",hideAuthToken:!0,options:{body:{type:"json",fields:{email:{type:"string",value:""},password:{type:"string",value:""}}}}},login:{name:"login",url:"auth/login",method:"post",hideAuthToken:!0,options:{body:{type:"json",fields:{email:{type:"string",value:""},password:{type:"string",value:""}}}}},me:{name:"me",url:"auth/me",method:"get",options:{}}};var de="/assets/eye.5b4bdfd7.svg",pe="/assets/eye-off.b035d5f7.svg";const _e={name:"ActionOptions",components:{JsonInput:ue},props:{options:{type:Object,required:!0},showOptionals:{type:Boolean,default:!1}},emits:["@update:form"],data(){return{t_form:this.form}},methods:{onUpdate(_,i){console.log("updated",_,i)},checkOptional(_){return this.showOptionals?!0:!_.optional}}},me={key:0,class:"row"},ye={class:"label flex gap-1 whitespace-nowrap"},he=["textContent"],ve=["textContent"],fe=["onUpdate:modelValue"];function ge(_,i,a,y,l,c){const h=R("JsonInput"),r=R("ActionOptions",!0);return o(!0),s(O,null,A(a.options,(n,x)=>(o(),s("div",{key:x,class:"option"},[!n.fields&&c.checkOptional(n)?(o(),s("div",me,[t("div",ye,[t("div",{class:"text",textContent:p(x)},null,8,he),t("div",{class:"type opacity-50",textContent:p("("+n.type+")")},null,8,ve)]),n.type==="json"?(o(),E(h,{key:0,class:"input","model-value":n.value,"onUpdate:modelValue":T=>n.value=T},null,8,["model-value","onUpdate:modelValue"])):b("",!0),n.type!=="json"?se((o(),s("input",{key:1,"onUpdate:modelValue":T=>n.value=T,class:"input",type:"text"},null,8,fe)),[[ne,n.value]]):b("",!0)])):b("",!0),n.fields&&c.checkOptional(n)?(o(),E(r,{key:1,options:n.fields,"show-optionals":a.showOptionals},null,8,["options","show-optionals"])):b("",!0)]))),128)}var be=H(_e,[["render",ge]]);const W={response_body:"Response",headers:"Headers"},xe={name:"ExecutionResult",components:{NButton:J},props:{execution:{type:Object,default:()=>({})}},data(){return{tabs:W,currentTab:Object.values(W)[0]}}},ke={class:"ExecutionResult max-w-[1200px]"},je={key:0,class:"loading"},Oe={class:"row"},we={class:"tabs"},Ce={class:"ml-auto"},Ae=t("div",{class:""},"status:",-1),Te={class:""},$e=t("div",null,"time:",-1),qe={key:0,class:"body card"},Se={class:"px-2 overflow-x-auto"},Ne={key:1,class:"card overflow-x-auto border border-gray-100 p-2"},Ee={class:"header-name opacity-50 font-bold"},Ie={class:"header-value"};function Me(_,i,a,y,l,c){const h=R("NButton");return o(),s("div",ke,[a.execution.loading?(o(),s("div",je,"Loading ...")):b("",!0),!a.execution.loading&&Object.keys(a.execution).length?(o(),s(O,{key:1},[t("div",Oe,[t("div",we,[(o(!0),s(O,null,A(l.tabs,(r,n)=>(o(),E(h,{key:n,class:V(["tab",{primary:r===l.currentTab,secondary:r!==l.currentTab}]),onClick:x=>l.currentTab=r},{default:D(()=>[U(p(r),1)]),_:2},1032,["class","onClick"]))),128))]),t("div",Ce,[Ae,t("div",{class:V(["res-code",{"text-red-500":a.execution.status&&a.execution.status>=400}])},p(a.execution.status),3)]),t("div",Te,[$e,t("div",null,p(a.execution.responseTime)+"ms",1)])]),l.currentTab===l.tabs.response_body?(o(),s("div",qe,[t("pre",Se,[t("code",null,p(JSON.stringify(a.execution.data,null,"	")),1)])])):b("",!0),l.currentTab===l.tabs.headers?(o(),s("div",Ne,[(o(!0),s(O,null,A(a.execution.res_headers,(r,n)=>(o(),s("div",{key:n,class:"the-header flex gap-2 py-2"},[t("div",Ee,p(n)+":",1),t("div",Ie,p(r),1)]))),128))])):b("",!0)],64)):b("",!0)])}var Ve=H(xe,[["render",Me]]),Be="/assets/play.05fbc1cd.svg";const Pe={name:"PlaygroundActionsMenu",props:{selected:{type:String,required:!1}},emits:["select"],computed:{items(){return Object.keys(N).map(_=>({name:_,...N[_]}))}},methods:{onItemSelected(_){this.$emit("select",_)}}},Re={class:"PlaygroundActionsMenu"},De={class:"side-menu card items"},Ue=t("div",{class:"header"},"Actions",-1),Je=["onClick"];function He(_,i,a,y,l,c){return o(),s("div",Re,[t("div",De,[Ue,(o(!0),s(O,null,A(c.items,h=>(o(),s("button",{key:h.name,class:V(["item",{selected:a.selected===h.name}]),onClick:r=>c.onItemSelected(h.name)},p(h.name),11,Je))),128))])])}var ze=H(Pe,[["render",He]]);const Fe={class:"ActionPlayground"},Le={key:0,class:"Playground"},Ge={class:"card api"},Qe={class:"url pl-4 flex gap-2 items-center"},We={class:"value"},Xe={class:"opacity-75 p-1"},Ye={class:"py-1 bg-gray-200 dark:bg-gray-600 pr-2 pl-1 -ml-2"},Ze={class:"header flex items-center"},Ke=t("span",{class:"ml-auto"},null,-1),et={class:"options-content px-4 pt-4"},tt={key:0,class:"collection-option grid grid-cols-8 gap-2 mb-2"},ot=t("div",{class:"label"},"collection",-1),st=["value"],nt=t("option",{value:""},"Select a Collection",-1),at=["value","textContent"],lt=t("div",{class:"row flex items-center justify-between py-4"},null,-1),ct={name:"ActionPlayground"},pt=Object.assign(ct,{setup(_){const i=Q(N),a=q("");Object.keys(N).forEach(e=>{i[e].hideAuthToken||(i[e].options||(i[e].options={}),i[e].options.headers={type:"json",fields:{"x-auth-token":{optional:!0,type:"string",value:a}}})});const y=ie(),l=M(()=>{var e;return(e=y.query.collection)!=null?e:""}),c=M(()=>y.query.action),h=M(()=>N[c.value]);M(()=>G.Documents(l));const r=q(0);function n(e){if(!e)return{};let j={};return typeof e=="object"&&e&&Object.keys(e).forEach(v=>{if(!e[v])return;let f=e[v].fields;f?Object.keys(f).forEach(m=>{if(f[m].fields)j[m]=n({[m]:f[m]});else{let u=f[m].value;u.__v_isRef?j[m]=u.value:j[m]=u}}):j=e[v].value}),j}const x=Q([]),T=async()=>{const e={action:c.value};x.splice(0,0,e);const{url:j,options:v,method:f}=h.value,m=j.replace(":collection",l.value);let u=n({body:v.body});const w=n({headers:v.headers});if(typeof u=="string"&&v.body.type==="json")try{u=JSON.parse(u)}catch(g){console.error(g)}e.loading=!0;const $=new Date().getTime();try{const{data:g,status:C,headers:k}=await ee({url:m,data:u,method:f,params:{},headers:w,skipAccountToken:!0,skipInterceptors:!0});e.responseTime=new Date().getTime()-$,e.data=g,e.status=C,e.body=u,e.res_headers=k,e.req_headers=w}catch(g){const{status:C,data:k,msg:P,headers:K}=te(g);e.error=g.message,e.responseTime=new Date().getTime()-$,e.data=k,e.status=C,e.body=u,e.res_headers=K,e.req_headers=w,e.error_msg=P,console.error(g)}finally{e.loading=!1,x.length>3&&x.splice(2,x.length-3),r.value++}},I=q(!1),X=()=>{I.value=!I.value};ae(()=>i,()=>{r.value=r.value+1},{deep:!0,immediate:!0});const z=re(),Y=e=>{z.push({name:y.name,params:y.params,query:{...y.query,action:e}})},F=q([]),L=q(!1),Z=async()=>{L.value=!0;try{const{data:e}=await G.Collections().list();F.value=e,l.value||B(e[0].name)}catch(e){console.error(e)}finally{L.value=!1}};le(()=>{Z()});const B=e=>{typeof e!="string"&&(e=e.target.value),z.push({name:y.name,params:y.params,query:{...y.query,collection:e}})};return(e,j)=>{var v,f,m,u,w,$,g,C;return o(),s("div",Fe,[S(ze,{selected:(v=e.$route.query)==null?void 0:v.action,onSelect:Y},null,8,["selected"]),d(c)?(o(),s("div",Le,[t("div",Ge,[t("div",Qe,[t("div",{class:V(["method text-lg font-bold uppercase",(f=i[d(c)])==null?void 0:f.method])},p((m=i[d(c)])==null?void 0:m.method),3),t("div",We,[t("span",Xe,p(d(oe)),1),t("span",Ye,p((u=i[d(c)])==null?void 0:u.url),1)]),S(J,{class:"ml-auto flex px-4 font-bold items-center py-2 text-primary dark:text-white",disabled:!d(l)&&!d(l).length,onClick:T},{default:D(()=>[U(" Send "),S(d(Be),{class:"fill-primary dark:fill-white"})]),_:1},8,["disabled"])])]),(o(),s("div",{key:d(c),class:"options card relative border border-gray-200"},[t("div",Ze,[U(" options "),Ke,S(J,{class:"",onClick:X},{default:D(()=>[(o(),E(ce(I.value?d(pe):d(de))))]),_:1})]),t("div",et,[S(be,{"show-optionals":I.value,options:(w=i[d(c)])==null?void 0:w.options},null,8,["show-optionals","options"]),(g=($=i[d(c)])==null?void 0:$.url)!=null&&g.includes(":collection")?(o(),s("div",tt,[ot,t("select",{value:(C=e.$route.query)==null?void 0:C.collection,onSelect:B,onChange:B},[nt,(o(!0),s(O,null,A(F.value,k=>(o(),s("option",{key:k,value:k.name,textContent:p(k.name)},null,8,at))),128))],40,st)])):b("",!0)])])),lt,(o(!0),s(O,null,A(x,(k,P)=>(o(),E(Ve,{key:P+r.value,execution:k},null,8,["execution"]))),128))])):b("",!0)])}}});export{pt as default};
