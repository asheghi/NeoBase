import{A as j,t as w}from"./api.9e09c6a2.js";import{I as B}from"./plus.7e714b57.js";import{o as n,c as i,a as s,_ as v,b as l,h as P,e as p,D as C,w as I,v as b,d,g as y,t as N,F as _,z as g,k as f}from"./index.b7488eef.js";import{M as D}from"./Modal.ea199481.js";import{N as F}from"./N-Button.05a78315.js";const m={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},V=s("path",{d:"M10 4H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-8l-2-2Z"},null,-1),$=[V];function A(t,o){return n(),i("svg",m,$)}m.width="24";m.height="24";m.viewBox="0 0 24 24";var K={render:A};const T={name:"NewProjectModal",components:{Modal:D,NButton:F},data(){return{form:{name:""},loading:!1}},methods:{show(){this.$refs.modal.show()},async submit(){if(!this.loading){this.loading=!0;try{const{data:t,status:o}=await j.Projects.create({name:this.form.name});this.$refs.modal.hide(),this.form.name="",await this.fetchData(),w("New project created")}catch(t){console.error(t),w("Failed to create project",{text:t.response.data.msg,icon:"error"})}finally{this.loading=!1}}}}},z={class:"new-project"},E={class:"form-group"},H=s("label",{for:"email"},"Project Name",-1);function L(t,o,k,x,e,a){const u=l("NButton"),h=l("Modal");return n(),P(h,{ref:"modal","close-on-click-outside":!e.loading,onClosed:o[2]||(o[2]=c=>e.form.name="")},{default:p(()=>[s("div",z,[s("div",{class:"form",onKeydown:o[1]||(o[1]=C((...c)=>a.submit&&a.submit(...c),["enter"]))},[s("div",E,[H,I(s("input",{id:"email","onUpdate:modelValue":o[0]||(o[0]=c=>e.form.name=c),name:"email",placeholder:"what's the name of your app?"},null,512),[[b,e.form.name]])]),d(u,{loading:e.loading,class:"primary w-full",onClick:a.submit},{default:p(()=>[y(N(e.loading?"Creating new":"Create")+" project ",1)]),_:1},8,["loading","onClick"])],32)])]),_:1},8,["close-on-click-outside"])}var S=v(T,[["render",L]]);const U={name:"ManageProjects",components:{NewProjectModal:S,IconPlus:B,IconFolder:K},data(){return{projects:[],fetching:null}},mounted(){this.fetchData()},methods:{onNewProject(){this.$refs.newProjectModal.show()},async fetchData(){this.fetching=!0;try{const{data:t}=await j.Projects.list();this.projects=t}catch(t){console.error(t)}finally{this.fetching=!1}}}},Z={class:"ManageProjects"},q={class:"list"},G=s("span",null,"New Project",-1),J={key:0,class:"no-data"};function O(t,o,k,x,e,a){const u=l("IconPlus"),h=l("IconFolder"),c=l("router-link"),M=l("NewProjectModal");return n(),i("div",Z,[s("div",q,[s("button",{class:"card",onClick:o[0]||(o[0]=(...r)=>a.onNewProject&&a.onNewProject(...r))},[d(u,{viewBox:"0 0 20 20",class:"icon"}),G]),e.fetching?(n(),i(_,{key:0},g(3,r=>s("div",{key:r,class:"card skeloading"})),64)):f("",!0),e.fetching?f("",!0):(n(),i(_,{key:1},[(n(!0),i(_,null,g(e.projects,r=>(n(),P(c,{key:r._id,to:{name:"collections",params:{project:r.name}},class:"card"},{default:p(()=>[d(h,{class:"icon",viewBox:"0 0 24 24"}),y(" "+N(r.name),1)]),_:2},1032,["to"]))),128)),!e.projects||!e.projects.length?(n(),i("div",J," you have no projects. ")):f("",!0)],64))]),d(M,{ref:"newProjectModal"},null,512)])}var ee=v(U,[["render",O]]);export{ee as default};
