import{M as C}from"./Modal.baf5f64c.js";import{A as r}from"./api.93f647bf.js";import{D as k}from"./trash.472b32d1.js";import{o as l,c as n,b as t,_ as y,f as c,F as b,k as g,a as d,T as x,w as m,j as h,g as u,e as D,t as M,n as N,l as j,i as B,v as V}from"./index.46219c50.js";const _={xmlns:"http://www.w3.org/2000/svg",class:"ionicon",viewBox:"0 0 512 512"},I=t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"44",d:"M358.62 129.28 86.49 402.08 70 442l39.92-16.49 272.8-272.13-24.1-24.1zm54.45-54.44-11.79 11.78 24.1 24.1 11.79-11.79a16.51 16.51 0 0 0 0-23.34l-.75-.75a16.51 16.51 0 0 0-23.35 0z"},null,-1),T=[I];function z(a,s){return l(),n("svg",_,T)}_.width="24";_.height="24";var F={render:z};const A={name:"Collections",components:{Modal:C,DeleteIcon:k,CreateIcon:F},data(){return{form:{name:""},collections:[]}},computed:{project(){return this.$route.params.project},collection(){return this.$route.params.collection}},mounted(){this.fetchData()},methods:{showNewCollectionModal(){this.$refs.modal.show()},async submit(){await r.Collections(this.project).create({name:this.form.name}),this.$refs.modal.hide(),this.form.name="",await this.fetchData()},async fetchData(){const{data:a}=await r.Collections(this.project).list();this.collections=a},async removeCollection(a){await r.Collections(this.project).delete(a.name),await this.fetchData()}}},K={class:"FireStore"},S={class:"side-bar"},E=t("div",{class:"head"},"Collections",-1),L={class:"items"},U=["onClick"],q={key:0,class:"document w-full h-full relative"},G={key:1,class:"select-document"},H={key:0},J={key:1,class:""},O={class:"new-project"},P={class:"form-group"},Q=t("label",{for:"email"},"Collection Name",-1);function R(a,s,W,X,i,o){const f=c("DeleteIcon"),v=c("router-link"),w=c("router-view"),p=c("Modal");return l(),n("div",K,[t("div",S,[E,t("button",{class:"btn btn-text btn-sm",onClick:s[0]||(s[0]=(...e)=>o.showNewCollectionModal&&o.showNewCollectionModal(...e))}," New Collection "),t("div",L,[(l(!0),n(b,null,g(i.collections,e=>(l(),u(v,{key:e,to:{name:"documents",params:{collection:e.name}},class:N(["item name",{selected:e.name===o.collection}])},{default:m(()=>[D(M(e.name)+" ",1),t("div",{class:"drop",onClick:Y=>o.removeCollection(e)},[d(f,{class:"fill-red-500 opacity-75",width:"24",height:"24"})],8,U)]),_:2},1032,["to","class"]))),128))])]),o.collection?(l(),n("div",q,[d(x,{name:"fade"},{default:m(()=>[(l(),u(w,{key:o.collection}))]),_:1})])):h("",!0),o.collection?h("",!0):(l(),n("div",G,[i.collections&&i.collections.length?(l(),n("div",H," select a collection first ")):(l(),n("div",J,"create a collection first"))])),d(p,{ref:"modal"},{default:m(()=>[t("div",O,[t("div",{class:"form",onKeydown:s[3]||(s[3]=j((...e)=>o.submit&&o.submit(...e),["enter"]))},[t("div",P,[Q,B(t("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=e=>i.form.name=e),name:"email",placeholder:"Choose a plural name"},null,512),[[V,i.form.name]])]),t("button",{class:"btn",onClick:s[2]||(s[2]=(...e)=>o.submit&&o.submit(...e))},"Create")],32)])]),_:1},512)])}var oe=y(A,[["render",R]]);export{oe as default};
